<script>
  'use strict'

  class MiddleWare extends HTMLElement {
    constructor() {
      super();
    }

    transform_request(target, req) {
      return [target, req];
    }

    transform_response(res) {
      return res
    }

    set_next(mw){
      this.next = mw;
    }

    fetch(target, req){
      return this.next.fetch(...this.transform_request(target, req)).then(this.transform_response);
    }
  }

</script>
